!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.SidebarJS=t()}(this,function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var t=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),n="sidebarjs",i=n+"--is-visible",o=n+"--is-moving",s=function(){function s(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.component,o=t.container,c=t.background,a=t.documentMinSwipeX,u=void 0===a?10:a,r=t.documentSwipeRange,h=void 0===r?40:r,d=t.nativeSwipe,v=t.nativeSwipeOpen;e(this,s),this.component=i||document.querySelector("["+n+"]"),this.container=o||s.create(n+"-container"),this.background=c||s.create(n+"-background"),this.documentMinSwipeX=u,this.documentSwipeRange=h,this.nativeSwipe=d!==!1,this.nativeSwipeOpen=v!==!1;var l=i&&o&&c;if(!l)try{this.transcludeContent()}catch(m){throw new Error("You must define an element with [sidebarjs] attribute")}this.nativeSwipe&&(this.addNativeGestures(),this.nativeSwipeOpen&&this.addNativeOpenGestures()),this.addAttrsEventsListeners(),this.background.addEventListener("click",this.close.bind(this))}return t(s,[{key:"transcludeContent",value:function(){this.container.innerHTML=this.component.innerHTML,this.component.innerHTML="",this.component.appendChild(this.container),this.component.appendChild(this.background)}},{key:"addNativeGestures",value:function(){this.component.addEventListener("touchstart",this.onTouchStart.bind(this)),this.component.addEventListener("touchmove",this.onTouchMove.bind(this)),this.component.addEventListener("touchend",this.onTouchEnd.bind(this))}},{key:"addNativeOpenGestures",value:function(){document.addEventListener("touchstart",this.onDocumentTouchStart.bind(this)),document.addEventListener("touchmove",this.onDocumentTouchMove.bind(this)),document.addEventListener("touchend",this.onDocumentTouchEnd.bind(this))}},{key:"addAttrsEventsListeners",value:function(){for(var e=["toggle","open","close"],t=0;t<e.length;t++)for(var i=document.querySelectorAll("["+n+"-"+e[t]+"]"),o=0;o<i.length;o++)s.elemHasListener(i[o])||(i[o].addEventListener("click",this[e[t]].bind(this)),s.elemHasListener(i[o],!0))}},{key:"onDocumentTouchStart",value:function(e){var t=e.touches[0].clientX;t<this.documentSwipeRange&&this.onTouchStart(e)}},{key:"onDocumentTouchMove",value:function(e){if(this.initialTouch&&!this.isVisible()){var t=e.touches[0].clientX-this.initialTouch;t>this.documentMinSwipeX&&(this.touchMoveDocument=e.touches[0].pageX-this.container.clientWidth,s.vendorify(this.component,"transform","translate(0, 0)"),s.vendorify(this.component,"transition","none"),this.touchMoveDocument<=0&&this.moveSidebar(this.touchMoveDocument))}}},{key:"onDocumentTouchEnd",value:function(){this.touchMoveDocument&&(delete this.touchMoveDocument,this.component.removeAttribute("style"),this.onTouchEnd())}},{key:"toggle",value:function(){this.component.classList.contains(i)?this.close():this.open()}},{key:"open",value:function(){this.component.classList.add(i)}},{key:"close",value:function(){this.component.classList.remove(i)}},{key:"onTouchStart",value:function(e){this.initialTouch=e.touches[0].pageX}},{key:"onTouchMove",value:function(e){this.touchMoveSidebar=this.initialTouch-e.touches[0].pageX,this.touchMoveSidebar>=0&&this.moveSidebar(-this.touchMoveSidebar)}},{key:"onTouchEnd",value:function(){this.component.classList.remove(o),this.touchMoveSidebar>this.container.clientWidth/3.5?this.close():this.open(),this.container.removeAttribute("style"),this.background.removeAttribute("style"),delete this.initialTouch,delete this.touchMoveSidebar}},{key:"moveSidebar",value:function(e){this.component.classList.add(o),s.vendorify(this.container,"transform","translate("+e+"px, 0)"),this.changeBackgroundOpacity(e)}},{key:"changeBackgroundOpacity",value:function(e){var t=.3- -e/(3.5*this.container.clientWidth);this.background.style.opacity=t.toString()}},{key:"isVisible",value:function(){return this.component.classList.contains(i)}}],[{key:"create",value:function(e){var t=document.createElement("div");return t.setAttribute(e,""),t}},{key:"vendorify",value:function(e,t,n){var i=t.charAt(0).toUpperCase()+t.slice(1),o=["Moz","Webkit","O","ms"];e.style[t]=n;for(var s=0;s<o.length;s++)e.style[o[s]+i]=n;return e}},{key:"elemHasListener",value:function(e,t){return e&&t?e.sidebarjsListener=t:e.sidebarjsListener}},{key:"version",get:function(){return"1.8.1"}}]),s}();return s});