!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.SidebarJS=e()}(this,function(){"use strict";function t(t){return t&&t.__esModule?t["default"]:t}function e(t,e){return e={exports:{}},t(e,e.exports),e.exports}var n=e(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n="sidebarjs",o=n+"--is-visible",i=n+"--is-moving",s=function(){function t(e){var o=void 0===e?{}:e,i=o.component,s=o.container,c=o.background,r=o.documentMinSwipeX,h=void 0===r?10:r,u=o.documentSwipeRange,a=void 0===u?40:u,d=o.nativeSwipe,p=void 0===d?!0:d,v=o.nativeSwipeOpen,l=void 0===v?!0:v;this.component=i||document.querySelector("["+n+"]"),this.container=s||t.create(n+"-container"),this.background=c||t.create(n+"-background"),this.documentMinSwipeX=h,this.documentSwipeRange=a,this.nativeSwipe=p!==!1,this.nativeSwipeOpen=l!==!1;var m=i&&s&&c;if(!m)try{this.transcludeContent()}catch(f){throw new Error("You must define an element with [sidebarjs] attribute")}this.nativeSwipe&&(this.addNativeGestures(),this.nativeSwipeOpen&&this.addNativeOpenGestures()),this.addAttrsEventsListeners(),this.background.addEventListener("click",this.close.bind(this))}return t.prototype.toggle=function(){this.component.classList.contains(o)?this.close():this.open()},t.prototype.open=function(){this.component.classList.add(o)},t.prototype.close=function(){this.component.classList.remove(o)},t.prototype.isVisible=function(){return this.component.classList.contains(o)},t.prototype.addAttrsEventsListeners=function(){for(var e=["toggle","open","close"],o=0;o<e.length;o++)for(var i=document.querySelectorAll("["+n+"-"+e[o]+"]"),s=0;s<i.length;s++)t.elemHasListener(i[s])||(i[s].addEventListener("click",this[e[o]].bind(this)),t.elemHasListener(i[s],!0))},t.prototype.transcludeContent=function(){this.container.innerHTML=this.component.innerHTML,this.component.innerHTML="",this.component.appendChild(this.container),this.component.appendChild(this.background)},t.prototype.addNativeGestures=function(){this.component.addEventListener("touchstart",this.onTouchStart.bind(this)),this.component.addEventListener("touchmove",this.onTouchMove.bind(this)),this.component.addEventListener("touchend",this.onTouchEnd.bind(this))},t.prototype.addNativeOpenGestures=function(){document.addEventListener("touchstart",this.onDocumentTouchStart.bind(this)),document.addEventListener("touchmove",this.onDocumentTouchMove.bind(this)),document.addEventListener("touchend",this.onDocumentTouchEnd.bind(this))},t.prototype.onTouchStart=function(t){this.initialTouch=t.touches[0].pageX},t.prototype.onTouchMove=function(t){this.touchMoveSidebar=this.initialTouch-t.touches[0].pageX,this.touchMoveSidebar>=0&&this.moveSidebar(-this.touchMoveSidebar)},t.prototype.onTouchEnd=function(){this.component.classList.remove(i),this.touchMoveSidebar>this.container.clientWidth/3.5?this.close():this.open(),this.container.removeAttribute("style"),this.background.removeAttribute("style"),delete this.initialTouch,delete this.touchMoveSidebar},t.prototype.moveSidebar=function(e){this.component.classList.add(i),t.vendorify(this.container,"transform","translate("+e+"px, 0)"),this.changeBackgroundOpacity(e)},t.prototype.changeBackgroundOpacity=function(t){var e=.3- -t/(3.5*this.container.clientWidth);this.background.style.opacity=e.toString()},t.prototype.onDocumentTouchStart=function(t){var e=t.touches[0].clientX;e<this.documentSwipeRange&&this.onTouchStart(t)},t.prototype.onDocumentTouchMove=function(e){if(this.initialTouch&&!this.isVisible()){var n=e.touches[0].clientX-this.initialTouch;n>this.documentMinSwipeX&&(this.touchMoveDocument=e.touches[0].pageX-this.container.clientWidth,t.vendorify(this.component,"transform","translate(0, 0)"),t.vendorify(this.component,"transition","none"),this.touchMoveDocument<=0&&this.moveSidebar(this.touchMoveDocument))}},t.prototype.onDocumentTouchEnd=function(){this.touchMoveDocument&&(delete this.touchMoveDocument,this.component.removeAttribute("style"),this.onTouchEnd())},t.create=function(t){var e=document.createElement("div");return e.setAttribute(t,""),e},t.vendorify=function(t,e,n){var o=e.charAt(0).toUpperCase()+e.slice(1),i=["Moz","Webkit","O","ms"];t.style[e]=n;for(var s=0;s<i.length;s++)t.style[i[s]+o]=n;return t},t.elemHasListener=function(t,e){return t&&e?t.sidebarjsListener=e:t.sidebarjsListener},Object.defineProperty(t,"version",{get:function(){return"1.8.1"},enumerable:!0,configurable:!0}),t}();e["default"]=s}),o=t(n);return o});