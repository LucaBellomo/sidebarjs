"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}();!function(t){"undefined"!=typeof module&&"undefined"!=typeof module.exports?module.exports=t:"function"==typeof define&&define.amd?define([],function(){return t}):window.SidebarJS=t}(function(){var t="sidebarjs",e=t+"--is-visible",n=t+"--is-moving";return function(){function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,o),this.component=e.component||document.querySelector("["+t+"]"),this.container=e.container||o.create(t+"-container"),this.background=e.background||o.create(t+"-background"),this.documentMinSwipeX=e.documentMinSwipeX||10,this.documentSwipeRange=e.documentSwipeRange||40,this.nativeSwipe=e.nativeSwipe!==!1,this.nativeSwipeOpen=e.nativeSwipeOpen!==!1,e.component||e.container||e.background||(this.container.innerHTML=this.component.innerHTML,this.component.innerHTML="",this.component.appendChild(this.container),this.component.appendChild(this.background)),this.nativeSwipe&&(this.component.addEventListener("touchstart",this.onTouchStart.bind(this)),this.component.addEventListener("touchmove",this.onTouchMove.bind(this)),this.component.addEventListener("touchend",this.onTouchEnd.bind(this)),this.nativeSwipeOpen&&(document.addEventListener("touchstart",this.onDocumentTouchStart.bind(this)),document.addEventListener("touchmove",this.onDocumentTouchMove.bind(this)),document.addEventListener("touchend",this.onDocumentTouchEnd.bind(this)))),this.addAttrsEventsListeners(),this.background.addEventListener("click",this.close.bind(this))}return _createClass(o,[{key:"addAttrsEventsListeners",value:function(){for(var e=["toggle","open","close"],n=0;n<e.length;n++)for(var i=document.querySelectorAll("["+t+"-"+e[n]+"]"),c=0;c<i.length;c++)o.elemHasListener(i[c])||(i[c].addEventListener("click",this[e[n]].bind(this)),o.elemHasListener(i[c],!0))}},{key:"onDocumentTouchStart",value:function(t){t.touches[0].clientX<this.documentSwipeRange&&(this.initialDocumentTouchX=t.touches[0].clientX,this.onTouchStart(t))}},{key:"onDocumentTouchMove",value:function(t){if(this.initialDocumentTouchX&&!this.isVisible()){var e=t.touches[0].clientX-this.initialDocumentTouchX;e>this.documentMinSwipeX&&(this.movedDocumentTouchX=!0,o.vendorify(this.component,"transform","translate(0, 0)"),o.vendorify(this.component,"transition","none"),this.onTouchMove(t))}}},{key:"onDocumentTouchEnd",value:function(){this.initialDocumentTouchX=0,this.movedDocumentTouchX&&(this.movedDocumentTouchX=0,this.component.removeAttribute("style"),this.onTouchEnd())}},{key:"toggle",value:function(){this.component.classList.contains(e)?this.close():this.open()}},{key:"open",value:function(){this.component.classList.add(e)}},{key:"close",value:function(){this.component.classList.remove(e)}},{key:"onTouchStart",value:function(t){this.container.touchStart=t.touches[0].pageX}},{key:"onTouchMove",value:function(t){if(this.container.touchMove=this.container.touchStart-t.touches[0].pageX,this.container.touchMoveDocument=t.touches[0].pageX-this.container.clientWidth,this.container.touchMove>=0||this.movedDocumentTouchX&&this.container.touchMoveDocument<=0){this.component.classList.add(n);var e=this.movedDocumentTouchX?this.container.touchMoveDocument:-this.container.touchMove;o.vendorify(this.container,"transform","translate("+e+"px, 0)");var i=.3- -e/(3.5*this.container.clientWidth);this.background.style.opacity=i.toString()}}},{key:"onTouchEnd",value:function(){this.component.classList.remove(n),this.container.touchMove>this.container.clientWidth/3.5?this.close():this.open(),this.container.touchMove=0,this.container.removeAttribute("style"),this.background.removeAttribute("style")}},{key:"isVisible",value:function(){return this.component.classList.contains(e)}}],[{key:"create",value:function(t){var e=document.createElement("div");return e.setAttribute(t,""),e}},{key:"vendorify",value:function(t,e,n){var o=e.charAt(0).toUpperCase()+e.slice(1),i=["Moz","Webkit","O","ms"];t.style[e]=n;for(var c=0;c<i.length;c++)t.style[i[c]+o]=n;return t}},{key:"elemHasListener",value:function(t,e){return t&&e?t.sidebarjsListener=e:t.sidebarjsListener}},{key:"version",get:function(){return"1.7.1"}}]),o}()}());